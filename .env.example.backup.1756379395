# Environment configuration for Nextcloud Wrapper v0.3.0

# =================== NEXTCLOUD SERVER SETTINGS ===================
# IMPORTANT: Change these to match your Nextcloud installation!

# Nextcloud server URL (without trailing slash)
NC_BASE_URL=https://your-nextcloud.example.com

# Admin credentials for Nextcloud API
NC_ADMIN_USER=admin
NC_ADMIN_PASS=your_admin_password_here

# =================== QUOTA SETTINGS ===================

# Default filesystem quota as percentage of Nextcloud quota
# Example: NC quota 100GB * 0.02 = 2GB filesystem quota
NC_DEFAULT_FS_PERCENTAGE=0.02

# Default Nextcloud quota for new users
NC_DEFAULT_QUOTA=100G

# Quota thresholds for warnings
NC_QUOTA_WARNING_THRESHOLD=0.8
NC_QUOTA_CRITICAL_THRESHOLD=0.95

# Enable automatic cleanup when quota exceeded
NC_ENABLE_AUTO_CLEANUP=true

# =================== WEBDAV MOUNT SETTINGS ===================

# WebDAV cache size (MB) - affects local storage usage
NC_WEBDAV_CACHE_SIZE=256

# Connection timeouts (seconds)
NC_WEBDAV_CONNECT_TIMEOUT=30
NC_WEBDAV_READ_TIMEOUT=60
NC_WEBDAV_RETRY_COUNT=3

# File permissions for WebDAV mounted files
NC_WEBDAV_FILE_MODE=644
NC_WEBDAV_DIR_MODE=755
NC_WEBDAV_UMASK=022

# Enable file locking
NC_WEBDAV_USE_LOCKS=true

# =================== BTRFS QUOTA SETTINGS ===================

# Base path for BTRFS subvolumes
NC_BTRFS_SUBVOLUME_PATH=/home

# =================== POSIX QUOTA SETTINGS ===================

# Filesystem for POSIX quotas
NC_POSIX_FILESYSTEM=/

# =================== VIRTUAL ENVIRONMENT SETTINGS ===================

# Nome environment Conda
NC_VENV_NAME=nextcloud-wrapper

# Versione Python per environment
NC_PYTHON_VERSION=3.11

# Abilita auto-attivazione environment
NC_AUTO_ACTIVATE=true

# Crea script wrapper
NC_CREATE_WRAPPERS=true

# Usa virtual environment per servizi SystemD
NC_SYSTEMD_USE_VENV=true

# =================== SYSTEMD SERVICE SETTINGS ===================

# Default user for system services
NC_SERVICE_USER=root

# Auto-enable services when created
NC_AUTO_ENABLE_SERVICES=true

# Service restart policy
NC_RESTART_POLICY=on-failure
NC_RESTART_DELAY=10

# Service timeout (seconds)
NC_SERVICE_TIMEOUT=60

# Logging level (DEBUG, INFO, WARNING, ERROR)
NC_LOG_LEVEL=INFO

# =================== BACKUP SETTINGS ===================

# Base directory for backups
NC_BACKUP_BASE_DIR=/var/backups/nextcloud

# Backup retention (days)
NC_BACKUP_RETENTION_DAYS=30

# Enable automatic backups
NC_ENABLE_AUTO_BACKUP=true

# =================== DEVELOPMENT/DEBUG SETTINGS ===================

# Enable verbose logging
NC_DEBUG=false

# Enable dry-run mode (for testing)
NC_DRY_RUN=false

# =================== EXAMPLES FOR DIFFERENT ENVIRONMENTS ===================

# Production VPS example:
# NC_BASE_URL=https://cloud.yourdomain.com
# NC_DEFAULT_FS_PERCENTAGE=0.01
# NC_DEFAULT_QUOTA=500G
# NC_SERVICE_USER=www-data

# Development environment:
# NC_BASE_URL=http://localhost:8080
# NC_DEFAULT_FS_PERCENTAGE=0.1
# NC_DEFAULT_QUOTA=10G
# NC_DEBUG=true

# High-volume hosting:
# NC_DEFAULT_FS_PERCENTAGE=0.005
# NC_DEFAULT_QUOTA=1T
# NC_WEBDAV_CACHE_SIZE=1024
# NC_ENABLE_AUTO_CLEANUP=true

# =================== USAGE NOTES ===================

# 1. Copy this file to .env in your project root
# 2. Modify the NC_BASE_URL, NC_ADMIN_USER, NC_ADMIN_PASS values
# 3. Adjust quotas and percentages based on your server capacity
# 4. Test with a single user before bulk operations
# 5. Monitor disk usage after enabling multiple users

# Filesystem percentage guidelines:
# - 0.5% (0.005): High-density hosting (1000+ users)  
# - 1% (0.01): Medium hosting (100-1000 users)
# - 2% (0.02): Low-density hosting (10-100 users) - DEFAULT
# - 5% (0.05): Development/testing
# - 10% (0.1): Single user development

# Security considerations:
# - Keep this file secure (contains admin password)
# - Use environment-specific values
# - Consider using Docker secrets in production
# - Rotate admin password regularly
